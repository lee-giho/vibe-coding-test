# 짜장면 vs 짬뽕 투표 서비스 — 주요 화면 구성 & 사용자 플로우 (모바일 우선)

> 본 문서는 “짜장면 vs 짬뽕” 투표 서비스의 **모바일 우선 UI 설계**와 **화면별 구성 요소/인터랙션**, 그리고 **사용자 플로우**를 상세히 정리합니다.  
> 단일 주제(1개 poll) MVP 기준이며, 반응형으로 데스크톱에서도 동일 기능을 제공합니다.

---

## 1. 디자인 원칙 (Mobile-First)

### 1.1 목표 UX
- **3초 안에 이해**: 들어오자마자 “짜장면 vs 짬뽕” 중 하나를 고를 수 있어야 함
- **1탭으로 투표**: 로그인 없이 즉시 투표 가능
- **즉시 피드백**: 투표 후 결과가 **즉시 갱신**되어야 함(실시간)
- **실패해도 친절**: 네트워크/서버 오류 시 명확한 안내 + 재시도 제공

### 1.2 레이아웃 가이드(모바일)
- 한 화면 내에서 **선택(투표) → 결과(집계)**를 모두 볼 수 있게 구성(스크롤 최소화)
- 버튼/터치 영역 최소 44px 이상
- 가독성: 제목/선택지/결과 영역의 위계가 명확해야 함

### 1.3 접근성(권장)
- 버튼에 `aria-label` 제공
- 결과 수치 텍스트로도 제공(색/그래프만 의존하지 않음)
- 키보드/스크린리더 기본 동작 고려

---

## 2. 정보 구조(IA)

- **홈/투표 페이지** (Single Page)
  - 헤더(서비스 타이틀, 부가 설명, 상태 배지)
  - 투표 선택 영역(2개 카드/버튼)
  - 결과 영역(합계/퍼센트/그래프)
  - 하단 푸터(최종 업데이트, 리프레시/재시도, 안내 문구)

> MVP는 단일 페이지로 “투표 → 결과”를 끝내고, 전환/이탈을 줄인다.

---

## 3. 전역 UI 컴포넌트 정의

### 3.1 공통 컴포넌트
- **Toast/Inline Banner**
  - 성공: “투표가 반영됐어요!” (선택)
  - 오류: “서버 연결이 불안정해요. 다시 시도해 주세요.”
- **Loading Indicator**
  - 결과 로딩 시 스켈레톤/스피너
- **Retry Button**
  - Error 상태에서 주요 액션
- **Last Updated**
  - “마지막 업데이트: 14:02” (서버 시간)

### 3.2 상태 배지(상단 우측 등)
- `LIVE`(실시간 연결 정상)
- `OFFLINE`(연속 실패/네트워크 끊김)
- `UPDATING…`(투표 반영 중)

---

## 4. 화면 상세: 홈/투표 페이지

> URL 예시: `/` (정적 파일), API는 `/api/v1/*`  
> 모바일 기준 1컬럼, 데스크톱에서는 2컬럼 레이아웃으로 확장 가능.

---

### 4.1 화면 구성(모바일)

#### A. Header 영역
- **서비스 타이틀**
  - 텍스트: “오늘 뭐 먹지?”
  - 서브 텍스트: “짜장면 vs 짬뽕, 당신의 선택은?”
- **상태 배지**
  - `LIVE / OFFLINE / UPDATING…`
- **(선택) 새로고침 아이콘**
  - 클릭 시 즉시 `GET /results` 재호출

**인터랙션**
- 배지:
  - LIVE: 기본색(예: 초록 계열)
  - OFFLINE: 주황/빨강 계열 + “연결 끊김” 툴팁/텍스트
- 새로고침:
  - 클릭 시 결과 즉시 갱신 요청
  - 중복 클릭은 1초 디바운스

---

#### B. Vote(선택) 영역 — 2개 카드

**구성 요소(각 카드 공통)**
- 옵션 이미지(선택): 음식 사진 또는 아이콘
- 옵션명(필수): “짜장면” / “짬뽕”
- 한 줄 카피(선택): “달달한 짜장!” / “칼칼한 짬뽕!”
- **투표 버튼(필수)**: “이걸로 투표”
- (선택) 현재 득표 퍼센트 미리보기(결과 영역과 중복 가능)

**레이아웃(모바일)**
- 세로 스택(상단: 짜장면 카드, 하단: 짬뽕 카드)
- 카드 간격 12~16px
- 버튼은 카드 하단 고정, full-width

**인터랙션**
- 버튼 클릭:
  - 즉시 버튼 비활성화 + `UPDATING…` 배지 노출
  - `POST /api/v1/votes` 호출
  - 성공: 결과 영역 업데이트 + “반영됨” 토스트 + 배지 `LIVE`
  - 실패:
    - 409(VOTE_LIMITED): “잠시 후 다시 시도해 주세요.” 토스트, 버튼 재활성화
    - 503/네트워크: `OFFLINE` 배지 + 재시도 유도(버튼 재활성화)
- 버튼 누른 카드 강조(선택)
  - 성공 시 1~2초간 카드 outline/애니메이션(가벼운 scale/shine)

**비활성 상태**
- API 요청 중:
  - 두 버튼 모두 비활성(중복 투표/동시 요청 방지)
- poll 종료(추후):
  - 버튼 비활성 + “투표 종료” 라벨

---

#### C. Results(결과) 영역

**구성 요소**
- 결과 제목: “현재 결과”
- 총 투표 수: “총 123표”
- 옵션별 결과 리스트(2개)
  - 라벨: “짜장면”, “짬뽕”
  - 수치: `count`, `percent`
  - **막대 그래프(Progress Bar)**:
    - percent 기반 width
- 마지막 업데이트: “마지막 업데이트: 14:02”
- (선택) “자동 업데이트 중(3초)” 작은 라벨

**인터랙션**
- 자동 갱신(필수: 폴링)
  - 2~5초 간격으로 결과 갱신
- (선택) 탭 비활성 시 갱신 일시중지
  - 다시 탭 활성화 시 즉시 1회 갱신

**상태별 표시**
- Empty(totalVotes=0):
  - “첫 투표를 해보세요!” 문구
  - progress bar는 0%
- Error:
  - 결과 영역 내에 오류 박스 표시
  - “다시 시도” 버튼 제공(결과 재조회)

---

#### D. Footer 영역
- 안내 문구: “투표 결과는 실시간으로 업데이트됩니다.”
- (선택) 서비스 정보 링크(Privacy/Terms) — MVP에서는 생략 가능

---

## 5. 반응형(데스크톱) 설계

### 5.1 브레이크포인트(권장)
- 모바일: < 768px
- 태블릿/데스크톱: ≥ 768px

### 5.2 데스크톱 레이아웃
- 2컬럼 그리드
  - 좌측: Vote 영역(카드 2개)
  - 우측: Results 영역(고정/스티키 가능)
- Header는 상단 고정 가능(선택)

### 5.3 인터랙션 변화
- hover 상태(데스크톱): 카드 그림자/버튼 하이라이트
- 키보드 포커스: 버튼 outline 강조

---

## 6. 사용자 플로우(Flow)

### 6.1 기본 플로우(정상 흐름)

1) **접속**
- 사용자가 `/` 접속
- 프론트: `loading` 표시
- API: `GET /api/v1/results?pollId=1`
- 성공 시 `success` 또는 `empty`로 전환

2) **투표 선택**
- 사용자가 “짜장면” 또는 “짬뽕” 선택 버튼 클릭
- 프론트: 버튼 비활성화 + `UPDATING…`
- API: `POST /api/v1/votes`

3) **결과 반영**
- 성공 응답에 포함된 최신 results로 UI 즉시 갱신
- 프론트: 토스트(선택) + `LIVE`
- 이후 폴링(또는 SSE)로 실시간 업데이트 유지

4) **재접속**
- 사용자가 페이지를 새로 열거나 새로고침
- DB에 저장된 누적 결과를 다시 불러와 표시(영속)

---

### 6.2 예외 플로우

#### A) 결과 조회 실패(초기 로딩)
- `GET /results` 실패(네트워크/서버)
- 프론트: `error` 상태 전환
- UI: “다시 시도” 버튼 노출
- 사용자가 재시도 → 성공 시 정상 플로우 복귀

#### B) 투표 실패
- `POST /votes` 실패
  - 409(VOTE_LIMITED): 토스트 후 버튼 재활성화
  - 404/400: “잘못된 투표 항목입니다” + 새로고침 유도
  - 503/500: “서버 오류” + 재시도 버튼/토스트

#### C) 실시간 업데이트 실패
- 폴링 연속 실패 N회(예: 3회)
- 프론트: 배지 `OFFLINE`
- 10초 후 자동 재시도(선택)
- 사용자가 새로고침 아이콘 또는 재시도 버튼으로 즉시 회복 가능

---

## 7. 화면 상태(loading/empty/error/success) 상세 정의

| State | 진입 조건 | 주요 UI | 사용자 액션 |
|---|---|---|---|
| loading | 최초 진입/재시도 | 스켈레톤/스피너 | 없음(기다림) |
| empty | totalVotes=0 | “첫 투표” 안내 + 선택 버튼 | 투표 가능 |
| success | totalVotes>=1 | 결과 그래프/수치 노출 | 투표/자동갱신 |
| error | GET 실패/연속 실패 | 오류 박스 + 재시도 | 재시도/새로고침 |

---

## 8. 프론트 이벤트 & API 매핑

### 8.1 이벤트 목록
- `onPageLoad` → `GET /results`
- `onVoteClick(optionId)` → `POST /votes`
- `onPollTick`(2~5초) → `GET /results`
- `onRetryClick` → `GET /results`
- `onVisibilityChange(hidden)` → 폴링 pause/resume(권장)

### 8.2 API 응답 기반 렌더링
- results 응답의 `options[]`를 그대로 UI에 바인딩
- `percent`는 숫자(0~100)로 받아 progress width로 사용
- `updatedAt`을 “HH:mm:ss”로 포맷

---

## 9. UX 디테일(권장)

- 투표 성공 애니메이션은 **짧고 가볍게**(200~300ms)
- 숫자 변화는 카운트업(선택) 가능하지만 과하지 않게
- 투표 중에는 버튼에 로딩 스피너를 넣어 “처리 중” 인지 가능하게
- 에러 문구는 기술적 메시지 대신 사용자 친화형으로 통일

---

## 10. 수용 기준(Acceptance Criteria)

- [ ] 모바일(375px)에서 한 화면 안에 “투표 선택 + 결과”가 자연스럽게 배치된다.
- [ ] 로딩/빈 상태/성공/오류 상태가 모두 구분되어 표시된다.
- [ ] 투표 버튼은 중복 클릭이 불가능하며, 성공 시 결과가 즉시 반영된다.
- [ ] 폴링 기반 실시간 갱신이 동작한다(최소 2~5초 주기).
- [ ] 새로고침/재접속 시 DB 기반 누적 결과를 정상 표시한다.
